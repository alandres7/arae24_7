<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head></head>


<body>


	<div th:fragment="quarter-section1-view">
		<div class="ribbon-quarter-tittle" align="center"
			th:style="'position: relative; background-color: ' + ${colorApp} + ';'">
			<a href="#"> <span
				style="color: #FFFFFF; font-size: 1.7vh; font-size: 1.7vw">Notificaciones</span>
			</a>
		</div>
		<div class="row margin-reset" >
			<div class="col-xs-5 col-sm-5 col-md-3 lblFecha">
				<p style="color: #9FC418;">Desde</p>
			</div>
			<div class="col-xs-5 col-sm-5 col-md-3 lblFecha">
				<p style="color: #9FC418;">Hasta</p>
			</div>
		</div>
		<div class="row margin-reset" >
			<div class="col-xs-5 col-sm-5 col-md-3" style="padding-right: 0px">
				<input type="date" id="fechaIni1" name="fechaIni1" class="form-control fechas1" th:value="${fechaIni}"></input>
			</div>
			<div class="col-xs-5 col-sm-5 col-md-3" style="padding-right: 0px">
				<input type="date" id="fechaFin1" name="fechaFin1" class="form-control fechas1" th:value="${fechaFin}"></input>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-4">
				<p style="color: #9FC418;">
					<input type="checkbox" id="fechaTodos1" name="fechaTodos1" value="true" onclick="comentarFechas1(this)"></input> Todos</p>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-2">
			 	<input type="hidden" id="pestana1" th:value="${idCapaSel}+'-0'"></input>
				<a id="botonFiltrar1" class="btn btnAplicarFiltro" onclick="presionarBotonFiltar1()">
					<span style="color: #FFFFFF;">Filtrar</span>
				</a>
			</div>
		</div>
		<div class="row margin-reset">
			<div class="col-xs-5 col-sm-5 col-md-6">
			    <p style="color: #9FC418;">
			    	<input type="checkbox" id="soloComHis1" name="soloComHis1" value="true"></input> Comentarios o historias pendientes</p>
			</div>
			<div class="col-xs-5 col-sm-5 col-md-6">
			    <p style="color: #9FC418;">
			    	<input type="checkbox" id="conComenDeHis1" name="conComenDeHis1" value="true"></input> Comentarios pendientes en las historias</p>
			</div>
		</div>

		<p id="validacionFechas" style="text-align: center; color: #FB0101"></p>
		<div class="row margin-reset">
			<div class="col-xs-12 col-sm-12 col-md-12"
				style="overflow-x: auto; overflow-y: auto;">

				<style>
				@media screen and (min-width: 2000px) {
				  p {
				     font-size: 20px;
				  }
				}
				.numCircle{
					background-color: white;
					border-radius: 50%;
					border-style: solid;
					right:-5px;
					top: calc(1.6vw - 1.6vw);
					position:absolute;
					display: flex;
					justify-content: center;
				    width: 2.5vw;
				    height: 2.5vw;
				    padding-top: 0.6vw;
				}
				.numCircle p {
					font-size: 0.7vw;
					font-weight: bold;
				}
				.rowStatus{
					border-radius: 0px 50px 50px 0px; 
					height: 2.5vw;
    				margin-left: -1.5vw;
    				padding-left: 1.5vw;
				}
				.rowStatus .textStatus{
					margin-top: 0.4vw
				}
				.rowStatus .textStatus input{
					margin: 0;
					vertical-align: middle
				}
				.rowStatus .textStatus span{
					display: inline;
					font-size: 0.7vw;
					color: white;
					vertical-align: middle;
				}
				.lblFecha{
				    margin-top: calc(17px - 0.7vw);
				    height: 1.5vw;
				}
				.btnAplicarFiltro{
					background-color: #9FC418;
					font-size: 1.1vw;
					float: right;
				}
				.btn-ver{
					background-color: #569837; 
					border: none;
					font-size: 1vw;
				}
				.btn-avist{
					background-color: #569837; 
					border: none;
					font-size: 1vw;
				}
				</style>
				
				<ul class="nav nav-tabs">
					<li class="sub-menu" th:each="capaNavTab : ${capasNavTabs}"
							th:style="${capaNavTab.id == idCapaSel} ? 'background-color:'+${colorApp}+'' : 'background-color: #9FC418'">
						<a href="#" data-toggle="dropdown" class="menuNaveAvist1"
								th:id="${capaNavTab.id} + '-0'"> 
							<span style="color: #FFFFFF;" th:text="${capaNavTab.nombre}"></span>
						</a>
						<ul class="dropdown-menu"
								th:if="(${capaNavTab.categorias} != null)">
							<li class="menuNaveAvist1"
									th:each="categoria : ${capaNavTab.categorias}"
									th:id="${capaNavTab.id} + '-' + ${categoria.idCategoria}">
								<a th:text="${categoria.nombre}"></a>
							</li>
						</ul>
					</li>
					<li style="float: right; width: 50%;">
						<div class="col-xs-4 col-sm-4 col-md-4" style="float: right">
							<div class="row rowStatus" style="background-color: #559839;">
								<div class="textStatus">
									<input type="checkbox" id="checkApr1" name="checkApr1" value="true" checked="true"></input>
									<span>Aprobadas</span>
								</div>
							</div>
							<div class="numCircle" style="border-color:#559839">
								<p id="numApr1"  th:text="${numApr}" style="color: #559839"></p>
							</div>
						</div>
						<div class="col-xs-4 col-sm-4 col-md-4" style="float: right;">
							<div class="row rowStatus" style="background-color: #B2B2B2;">
								<div class="textStatus">
									<input type="checkbox" id="checkPen1" name="checkPen1" value="true" checked="true"></input>
									<span>Pendientes</span>
								</div>
							</div>
							<div class="numCircle" style="border-color:#B2B2B2">
								<p id="numPen1" style="color: #B2B2B2" th:text="${numPen}"></p>
							</div>
						</div>
						<div class="col-xs-4 col-sm-4 col-md-4" style="float: right;">
							<div class="row rowStatus" style="background-color: #B22D2C;">
								<div class="textStatus">
									<input type="checkbox" id="checkRec1" name="checkRec1" value="true" checked="true"></input>
									<span>Rechazadas</span>
								</div>
							</div>
							<div class="numCircle" style="border-color:#B22D2C">
								<p id="numRec1" style="color: #B22D2C" th:text="${numRec}"></p>
							</div>
						</div>
					</li>
				</ul>

				<script th:inline="javascript"> 
                        /*<![CDATA[*/ 					    					
                        $('.menuNaveAvist1').off().click(function() {                       	
                            var idComplete = $(this).attr('id'); 
                            refrescarVistaTablaAvistamientos1(idComplete); 
                        });
						
						function presionarBotonFiltar1(){
						    var idComplete = $('#pestana1').val();						    
						    refrescarVistaTablaAvistamientos1(idComplete);
						};
						
						function refrescarVistaTablaAvistamientos1(idComplete) {
						    $('#pestana1').val(idComplete);
							$('#pestana2').val(idComplete);
                            var listaIds = idComplete.split("-");
                                                                                   
                            var idCapa = listaIds[0];
                            var idCategoria = listaIds[1];
							
							var fechaIni = $('#fechaIni1').val(); 
                            var fechaFin = $('#fechaFin1').val();
						    
						    if ((document.getElementById('fechaTodos1')).checked == true){
                                fechaIni = "2000-01-01";
                                fechaFin = [[${fechaFin}]];
                            }
						    
						    var idApp = [[${idApp}]];                        	
                    	    var colorApp = [[${colorApp}]];
                    	    var numColorApp = [[${numColorApp}]];
                    	    
// //                 			console.log("Color original HEX: "+ colorApp);
// //                 			var colorR = hexToRgb(colorApp).r;
// //                 			var colorG = hexToRgb(colorApp).g;
// //                 			var colorB = hexToRgb(colorApp).b;
// //                 			console.log("Color original RGB: "+ colorR + "," + colorG + "," + colorB);
                			
// //                 			var sustr = -50;
// //                 			var newColorR = colorR-sustr >= 0 ? colorR-sustr : 0 ;
// //                 			var newColorG = colorG-sustr >= 0 ? colorG-sustr : 0 ;
// //                 			var newColorB = colorB-sustr >= 0 ? colorB-sustr : 0 ;
// //                 			var newColor = rgbToHex(newColorR,newColorG,newColorB);
// //                 			console.log("Color Nuevo HEX: "+ newColor);
                			
// //                 			colorApp = newColor;
						    
						    var checkApr = (document.getElementById('checkApr1')).checked;
                            var checkPen = (document.getElementById('checkPen1')).checked;
                            var checkRec = (document.getElementById('checkRec1')).checked;
						    var estadosList = crearStringEstadosAvist(checkApr,checkPen,checkRec);	
						    
						    var soloComHis = (document.getElementById('soloComHis1')).checked;
						    var conComenDeHis = (document.getElementById('conComenDeHis1')).checked;
							
							pintarTablaAvistamientos(idComplete,idCapa,idCategoria,fechaIni,fechaFin,
									                 estadosList,soloComHis,conComenDeHis,idApp,colorApp,numColorApp);
							
                        };

                        function comentarFechas1(checkbox) {
                            if (checkbox.checked) {
                                $('.fechas1').attr("readonly",true);
                            }else {
                                $('.fechas1').attr("readonly",false);
                            }
                        }
                        
						/*]]>*/	
                    </script>
				<div th:replace="area247/adminAvistamientos/pantallasAvistamiento :: tableAvistamientos"></div>
			</div>
		</div>
	</div>




	<div th:fragment="quarter-section1-modal">
		<div class="ribbon-quarter-tittle" align="center"
			th:style="'position: relative; background-color: ' + ${colorApp} + ';'">
			<a href="#"> <span style="color: #FFFFFF; font-size: 1.7vh; font-size: 1.7vw">Notificaciones</span>
			</a>
		</div>
		<div class="row margin-reset">
			<div class="col-xs-1 col-sm-1 col-md-3 lblFecha">
				<p style="color: #9FC418;">Desde</p>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-3 lblFecha">
				<p style="color: #9FC418;">Hasta</p>
			</div>
		</div>
		<div class="row margin-reset">
			<div class="col-xs-4 col-sm-4 col-md-3" style="padding-left: 0px">
				<input type="date" id="fechaIni2" name="fechaIni2" class="form-control fechas2" th:value="${fechaIni}"></input>
			</div>
			<div class="col-xs-4 col-sm-4 col-md-3" style="padding-left: 0px;">
				<input type="date" id="fechaFin2" name="fechaFin2" class="form-control fechas2" th:value="${fechaFin}"></input>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-1" style="padding-right: 0px">
				<p style="color: #9FC418;"><input type="checkbox" id="fechaTodos2" name="fechaTodos2" value="true" onclick="comentarFechas2(this)"></input> Todos</p>
			</div>
			<div class="col-md-4">
				    <p style="color: #9FC418;"><input type="checkbox" id="soloComHis2" name="soloComHis2" value="true"></input> Comentarios o historias pendientes</p>
				    <p style="color: #9FC418;"><input type="checkbox" id="conComenDeHis2" name="conComenDeHis2" value="true"></input> Comentarios pendientes en las historias</p>
			</div>
			<div class="col-md-1">
				<input type="hidden" id="pestana2" th:value="${idCapaSel}+'-0'"></input>
				<a id="botonFiltrar2" class="btn btnAplicarFiltro" onclick="presionarBotonFiltar2()">
					<span style="color: #FFFFFF;">Filtrar</span>
				</a>
			</div>
		</div>

		
		<p id="validacionFechas" style="text-align: center; color: #FB0101"></p>

		<div class="row margin-reset">
			<div class="col-xs-12 col-sm-12 col-md-12"
				style="overflow-x: auto; overflow-y: auto;">

				<style>
				/*.sub-menu:hover .dropdown-menu {
					display: block;
					background-color: #9FC418;
				}*/
				</style>

				<ul class="nav nav-tabs">
					<li class="sub-menu" th:each="capaNavTab : ${capasNavTabs}"
						th:style="${capaNavTab.id == idCapaSel} ? 'background-color:'+${colorApp}+'' : 'background-color: #9FC418'">
						<a href="#" data-toggle="dropdown" class="menuNaveAvist2"
						th:id="${capaNavTab.id} + '-0'"> <span style="color: #FFFFFF;"
							th:text="${capaNavTab.nombre}"></span>
					</a>
						<ul class="dropdown-menu"
							th:if="(${capaNavTab.categorias} != null)">
							<li class="menuNaveAvist2"
								th:each="categoria : ${capaNavTab.categorias}"
								th:id="${capaNavTab.id} + '-' + ${categoria.idCategoria}">
								<a th:text="${categoria.nombre}"></a>
							</li>
						</ul>
					</li>
					<li style="float:right; width: 60%;">
						<div class="col-xs-4 col-sm-4 col-md-4" style="float: right;">
							<div class="row rowStatus" style="background-color: #559839;">
								<div class="textStatus">
									<input type="checkbox" id="checkApr2" name="checkApr2" value="true" checked="true"></input>
									<span>Aprobadas</span>
								</div>
							</div>
							<div class="numCircle" style="border-color: #559839;">
								<p id="numApr2" style="color: #559839;" th:text="${numApr}"></p>
							</div>
						</div>
						<div class="col-xs-4 col-sm-4 col-md-4" style="float: right;">
							<div class="row rowStatus" style="background-color: #B2B2B2;">
								<div class="textStatus">
									<input type="checkbox" id="checkPen2" name="checkPen2" value="true" checked="true"></input>
									<span>Pendientes</span>
								</div>
							</div>
							<div class="numCircle" style="border-color: #B2B2B2;">
								<p id="numPen2" style="color: #B2B2B2;" th:text="${numPen}"></p>
							</div>
						</div>
						<div class="col-xs-4 col-sm-4 col-md-4" style="float: right;">
							<div class="row rowStatus" style="background-color: #B22D2C;">
								<div class="textStatus">
									<input type="checkbox" id="checkRec2" name="checkRec2" value="true" checked="true"></input>
									<span>Rechazadas</span>
								</div>
							</div>
							<div class="numCircle" style="border-color: #B22D2C;">
								<p id="numRec2" style="color: #B22D2C;" th:text="${numRec}"></p>
							</div>
						</div>
					</li>
				</ul>

				<script th:inline="javascript"> 
                        /*<![CDATA[*/ 		
                        $('.menuNaveAvist2').off().click(function() {                       	
                            var idComplete = $(this).attr('id'); 
                            refrescarVistaTablaAvistamientos2(idComplete); 
                        });
						
						function presionarBotonFiltar2(){
						    var idComplete = $('#pestana2').val(); 
						    refrescarVistaTablaAvistamientos2(idComplete);
						};
						
						function refrescarVistaTablaAvistamientos2(idComplete) {
						    $('#pestana1').val(idComplete);
						    $('#pestana2').val(idComplete);
                            var listaIds = idComplete.split("-");
                            
                            var idCapa = listaIds[0];
                            var idCategoria = listaIds[1];
							
							var fechaIni = $('#fechaIni2').val(); 
                            var fechaFin = $('#fechaFin2').val();
						    
						    if ((document.getElementById('fechaTodos2')).checked == true){
                                fechaIni = "2000-01-01";
                                fechaFin = [[${fechaFin}]];
                            }
						    
						    var idApp = [[${idApp}]];                        	
                    	    var colorApp = [[${colorApp}]];
                    	    var numColorApp = [[${numColorApp}]];
						    
						    var checkApr = (document.getElementById('checkApr2')).checked;
                            var checkPen = (document.getElementById('checkPen2')).checked;
                            var checkRec = (document.getElementById('checkRec2')).checked;
						    var estadosList = crearStringEstadosAvist(checkApr,checkPen,checkRec);
						    
						    var soloComHis = (document.getElementById('soloComHis2')).checked;
						    var conComenDeHis = (document.getElementById('conComenDeHis2')).checked;
							
							pintarTablaAvistamientos(idComplete,idCapa,idCategoria,fechaIni,fechaFin,
									estadosList,soloComHis,conComenDeHis,idApp,colorApp,numColorApp); 
						};
                        
                        function comentarFechas2(checkbox) {
                            if (checkbox.checked) {
                                $('.fechas2').attr("readonly",true);
                            }else {
                                $('.fechas2').attr("readonly",false);
                            }
                        }
						/*]]>*/	
                    </script>
				<div th:replace="area247/adminAvistamientos/pantallasAvistamiento :: tableAvistamientos"></div>
			</div>
		</div>
	</div>




	<div id="tableAvistamientoFragmento" th:fragment="tableAvistamientos">
		<table id="tableAvistamientos"
			class="table table-striped table-bordered paginated" cellspacing="0"
			style="width: 100%; background-color: #E5E5E5; font-size: 0.7vh; font-size: 0.7vw">
			<thead>
				<tr th:style="'color: #' + ${numColorApp} + ';'">
					<th>ID</th>
					<th>Nombre Com&uacute;n</th>
					<th>Tipo</th>
					<th>Especie</th>
					<th>Fecha Creaci&oacute;n</th>
					<th>Estado</th>
					<th></th>
				</tr>
			</thead>

		</table>
	</div>




	<div id="avistamientoDetalle" th:fragment="quarter-section2">
		<div class="ribbon-quarter-tittle" align="center" th:style="' position: relative; background-color: #' + ${numColorApp} + ';'">
			<a href="#"> <span
				style="color: #FFFFFF; font-size: 1.7vw">Visualizaci&oacute;n</span>
			</a>
		</div>
		<div style="margin: 5%">
			<div class="row margin-reset"
				style="background-color: #E7E7E7;">
				<div class="col-xs-12 col-sm-5 col-md-6" align="center"
					th:style="'padding: 0px; box-shadow: 8px 0px 28px -12px rgba(0,0,0,0.75)'">
					<div th:style="'width:100%;height: 2vw;background-color: #' + ${numColorApp} + ';'"></div>
					<img th:src="${rutaIconoMarcador}" th:style="'float: initial;width: 5vw;margin-top: -3.5vw;'"></img>
					<div style="margin: 5%;margin-top: 0px;">
						<img id="imagenAvistamiento"
							th:src="${(rutaImagen != null) ? rutaImagen : 'assets/images/E7E7E7.png'}"
							style="width: 100%;" class="img-fluid rounded d-block m-l-none" />
					</div>
				</div>
				<script type="text/javascript">
				$('#imagenAvistamiento').on("change",function(){
					alert("entró");
					if (imagen.naturalHeight > imagen.naturalWidth){
						alert("horizontal");
// 						$('#imagenAvistamiento').style.width = "auto";
// 						$('#imagenAvistamiento').style.height = "20vw";
					}else{
						alert("vertical");
// 						$('#imagenAvistamiento').style.width = "100%";
// 						$('#imagenAvistamiento').style.height = "auto";
					}
				});
				</script>
				<div class="col-xs-12 col-sm-7 col-md-6"
					style="padding: 0px; font-size: 1.2vw">
					<div class="row margin-reset">
						<p align="center" th:style="'margin: 0;color: #' + ${numColorApp} + ';'">
							<strong type="text" style="font-size: 1.4vw"
								th:text="${(nombre != null ? nombre : 'Nombre')}"></strong> 
							<span type="text" th:text="' | '"></span> 
							<span type="text" style="font-size: 1.2vw"
								th:text="${(nombreCientifico != null) ? nombreCientifico : 'Nombre Cientifico'}"></span>
						</p>

						<p align="center" th:style="'font-size: 1vw;margin: 0;color: #' + ${numColorApp} + ';'">
							<strong th:text="'Cod. ' "></strong> <strong th:text="${id}"></strong>
						</p>
						
						<hr style="margin: 0; border-color: #cccccca3;" />

						<p th:style="'color: #' + ${numColorApp} + ';margin: 1em;margin-top: 0.5em;font-size: 0.9vw;text-align: justify;line-height: normal;'">
							<span type="text" th:text="${descripcion}"
								style="color: #777575; border-radius: 0px;"></span>	
						</p>

						<p th:style="'font-size: 1vw;color: #' + ${numColorApp} + '; margin-left:1em;'">
							<span class="glyphicon glyphicon-calendar"></span> Fecha: <span
								type="text" th:text="${fechaCreacion}"
								style="color: #777575; border-radius: 0px;"></span>
						</p>

						<p th:style="'font-size: 1vw;color: #' + ${numColorApp} + '; margin-left:1em;'">
							<span class="glyphicon glyphicon-user"></span> Usuario: <span
								type="text" th:text="${username}"
								style="color: #777575; border-radius: 0px;"></span>
						</p>
						<hr style="margin: 0;margin-bottom: 1vw;border-color: #cccccca3;"/>

						<!--<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">Estado:
                        <span th:text="${nombreEstado}" th:style="'font-weight: 900; color: ' + ${colorEstado}"></span></p>                       
                        <p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">Tipo Avistamiento:
                        <span th:text="${tipoAvistamiento}" style="color:#777575;"></span></p>                        
                        <p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">Tipo Especie:
                        <span th:text="${tipoEspecieTexto}" style="color:#777575;"></span></p>-->

						<div th:style="'display: ' + ${avistamientoCargado} + ';'">
							<!--<div th:style="'display: ' + ${aproRecAvist} + ';'" >
                                <p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">Editar:
					            <a id="editAvist" style="background-color: #9FC418;" class="btn btn-default"
					                th:onclick="'visualizarEditarAvistamiento(' + ${id} + ',\'' + ${numColorApp} + '\');'">
						            <span style="color: #FFFFFF;" class="glyphicon glyphicon-pencil"></span>
						        </a></p>
					        </div>
					        <br/>-->

							<div class="row margin-reset" align="center" style="padding-bottom: 0.5vw;">
								<a id="verHistoAvist" th:if="${tieneHistoria}" class="btn btn-ver" 
									th:onclick="'visualizarHistoriasAvistamiento(' + ${id} + ');'">
									<span style="color: #FFFFFF;">Ver Historias</span>
								</a> 
								<a id="verComenAvist" th:if="!${tieneHistoria}" class="btn btn-ver" 
									th:onclick="'visualizarComentariosAvistamiento(' + ${id} + ');'">
									<span style="color: #FFFFFF;">Ver Comentarios</span>
								</a>
							</div>
							<div th:style="'display: ' + ${aproRecAvist} + ';'" class="row margin-reset" align="center">
								<a id="aproAvist" class="btn aproButtonAvist btn-avist"
									th:onclick="'visualizarAprobarAvistamiento(' + ${id} + ',\'' + ${numColorApp} + '\');'">
									<span style="color: #FFFFFF;">Aprobar</span>
								</a> 
								<a id="rechAvist" class="btn rechaButtonAvist btn-avist"
									style="background-color: #FF0000;"
									th:onclick="'rechazarAvistamiento(' + ${id} + ',\'' + ${numColorApp} + '\');'">
									<span style="color: #FFFFFF;">Rechazar</span>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>




	<div th:fragment="quarter-section3-view">

		<div class="ribbon-quarter-tittle" align="center"
			th:style="' position: relative; background-color: #' + ${numColorApp} + ';'">
			<a href="#"> <span
				style="color: #FFFFFF; font-size: 1.7vh; font-size: 1.7vw">Monitoreo</span>
			</a>
		</div>
		<div class="row margin-reset">
			<div class="col-md-3 lblFecha">
				<p style="color: #9FC418;">Desde</p>
			</div>
			<div class="col-md-3 lblFecha">
				<p style="color: #9FC418;">Hasta</p>
			</div>			
		</div>
		<div class="row margin-reset">
			<div class="col-xs-5 col-sm-5 col-md-3" style="padding-right: 0px">
				<input type="date" id="fechaIniEst1" name="fechaIniEst1" class="form-control fechasEst1" th:value="${fechaIni}"></input>
			</div>
			<div class="col-xs-5 col-sm-5 col-md-3" style="padding-right: 0px">
				<input type="date" id="fechaFinEst1" name="fechaFinEst1" class="form-control fechasEst1" th:value="${fechaFin}"></input>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-4">
				<p style="color: #9FC418;"><input type="checkbox" id="fechaTodosEst1" name="fechaTodosEst1" value="true" onclick="comentarFechasEst1(this)"></input> Todos</p>
			</div>
			<div class="col-xs-2 col-sm-2 col-md-2">
				<input type="hidden" id="pestanaEst1" th:value="${idGrafEst}"></input>
				<a id="botonFiltrarEst1" class="btn" onclick="presionarBotonFiltarEst1()" style="background-color: #9FC418;font-size: 1.1vw;float: right">
					<span style="color: #FFFFFF;">Filtrar</span>
				</a>
			</div>
		</div>

		<br />
		<p id="validacionFechasEst" style="text-align: center; color: #FB0101"></p>

		<div class="row margin-reset">
			<div class="col-xs-12 col-sm-12 col-md-12"
				style="overflow-x: auto; overflow-y: auto;">

				<ul class="nav nav-tabs">
					<li class="sub-menu"
						th:style="'background-color: #' + ${numColorApp} + ';'"><a
						href="#" data-toggle="dropdown" id="usuario"
						class="menuNaveAvistEst1"> <span style="color: #FFFFFF;">Usuario</span>
					</a></li>
					<li class="sub-menu" th:style="'background-color: #9FC418'"><a
						href="#" data-toggle="dropdown" id="municipio"
						class="menuNaveAvistEst1"> <span style="color: #FFFFFF;">Municipio</span>
					</a></li>
					
				</ul>

				<script th:inline="javascript">                     
                        $('.menuNaveAvistEst1').off().click(function() {                       	
                            var id = $(this).attr('id');
                            refrescarVistaGraficoEstadistico1(id); 
                        });
					
					    function presionarBotonFiltarEst1(){
					        var id = $('#pestanaEst1').val();
					        refrescarVistaGraficoEstadistico1(id);
					    };
					
					    function refrescarVistaGraficoEstadistico1(id) {
						    $('#pestanaEst1').val(id);
							$('#pestanaEst2').val(id);
							
							var fechaIni = $('#fechaIniEst1').val(); 
                            var fechaFin = $('#fechaFinEst1').val();
                            
                            if ((document.getElementById('fechaTodosEst1')).checked == true){
                            	fechaIni = "2000-01-01";
                            	fechaFin = [[${fechaFin}]];
                            }
                            
                            var colorApp = [[${colorApp}]];                           
                            var filtroCapa = [[${filtroCapasEspadis}]];
                            var filtroCateg = [[${filtroCategEspadis}]];
                            
                            drawGraficoEstadistico(fechaIni,fechaFin,id,colorApp,filtroCapa,filtroCateg,false) 						
					    };
                                       
                        function comentarFechasEst1(checkbox) {
                            if (checkbox.checked) {
                                $('.fechasEst1').attr("readonly",true);
                            }else {
                                $('.fechasEst1').attr("readonly",false);
                            }
                        }
                    </script>

			</div>
		</div>
	</div>



	<div th:fragment="quarter-section3-modal">

		<div class="ribbon-quarter-tittle" align="center"
			th:style="' position: relative; background-color: #' + ${numColorApp} + ';'">
			<a href="#"> <span style="color: #FFFFFF;  font-size: 1.7vh; font-size: 1.7vw">Monitoreo</span>
			</a>
		</div>

		<br />
		<div class="row margin-reset">
		
		<div class="col-md-5">
				<p style="color: #9FC418;">Fecha Inicio</p>
			</div>
			<div class="col-md-5">
				<p style="color: #9FC418;">Fecha Fin</p>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-1">
				<p style="color: #9FC418;">Todos</p>
			</div>
			<div class="col-xs-1 col-sm-1 col-md-1">
				<input type="checkbox" id="fechaTodosEst2" name="fechaTodosEst2" value="true" onclick="comentarFechasEst2(this)"></input>
			</div>
			<div class="col-xs-5 col-sm-5 col-md-5">
				<input type="date" id="fechaIniEst2" name="fechaIniEst2" class="form-control fechasEst2" style="border-radius: 0px;" th:value="${fechaIni}"></input>			</div>
			<div class="col-xs-5 col-sm-5 col-md-5">
				<input type="date" id="fechaFinEst2" name="fechaFinEst2" class="form-control fechasEst2" style="border-radius: 0px;" th:value="${fechaFin}"></input>
			</div>
			<div class="col-xs-2 col-sm-2 col-md-2">
				<input type="hidden" id="pestanaEst2" th:value="${idGrafEst}"></input>
				<a id="botonFiltrarEst2" class="btn" onclick="presionarBotonFiltarEst2()" style="background-color: #9FC418;">
					<span style="color: #FFFFFF;">Filtrar</span>
				</a>
			</div>
		
		</div>

		<p id="validacionFechasEst" style="text-align: center; color: #FB0101"></p>

		<div class="row margin-reset">
			<div class="col-xs-12 col-sm-12 col-md-12"
				style="overflow-x: auto; overflow-y: auto;">

				<ul class="nav nav-tabs">
					<li class="sub-menu"
						th:style="'background-color: #' + ${numColorApp} + ';'"><a
						href="#" data-toggle="dropdown" id="usuario"
						class="menuNaveAvistEst2"> <span style="color: #FFFFFF;">Usuario</span>
					</a></li>
					<li class="sub-menu" th:style="'background-color: #9FC418'"><a
						href="#" data-toggle="dropdown" id="municipio"
						class="menuNaveAvistEst2"> <span style="color: #FFFFFF;">Municipio</span>
					</a></li>
				</ul>

				<script th:inline="javascript"> 
                        $('.menuNaveAvistEst2').off().click(function() {                       	
                            var id = $(this).attr('id');
                            refrescarVistaGraficoEstadistico2(id); 
                        });
					
					    function presionarBotonFiltarEst2(){
					        var id = $('#pestanaEst2').val(); 
					        refrescarVistaGraficoEstadistico2(id);
					    };
					
					    function refrescarVistaGraficoEstadistico2(id) {
						    $('#pestanaEst1').val(id);
							$('#pestanaEst2').val(id);
							
							var fechaIni = $('#fechaIniEst2').val(); 
                            var fechaFin = $('#fechaFinEst2').val();
                            
                            if ((document.getElementById('fechaTodosEst2')).checked == true){
                            	fechaIni = "2000-01-01";
                            	fechaFin = [[${fechaFin}]];
                            }
                            
                            var colorApp = [[${colorApp}]];                            
                            var filtroCapa = [[${filtroCapasEspadis}]];
                            var filtroCateg = [[${filtroCategEspadis}]];
                            
                            drawGraficoEstadistico(fechaIni,fechaFin,id,colorApp,filtroCapa,filtroCateg,false); 
                        };							 
                        
                        function comentarFechasEst2(checkbox) {
                            if (checkbox.checked) {
                                $('.fechasEst2').attr("readonly",true);
                            }else {
                                $('.fechasEst2').attr("readonly",false);
                            }
                        }
                    </script>

			</div>
		</div>
	</div>




	<div id="modalHistorias" th:fragment="modalHistorias">
		<div class="modal" th:style="'display: ' + ${despliegeModalHistorias}">
			<div class="contenido">

				<button onclick="closeModalHistorias()" class="btn btn-default"
					style="background-color: #FB0101; float: right;">
					<span class="glyphicon glyphicon-remove"
						style="float: right; color: #FFFFFF;"></span>
				</button>

				<h1 style="background-color: #9FC418; color: #FFFFFF; width: 600px;">Listado
					de Historias</h1>

				<div
					style="border: 25px solid; border-color: transparent; background-color: rgba(0, 0, 0, 0.8);">

					<table id="tableHistorias"
						class="table table-striped table-bordered" cellspacing="0"
						style="width: 100%; background-color: #E5E5E5; font-size: 0.9vw;">
						<thead>
							<tr>
								<th>ID</th>
								<th>Historia</th>
								<th>Aceptar/Rechazar</th>
								<th>Comentarios</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="historia : ${historiaList}">
								<td th:text="${historia.id}"></td>
								<td>
									<div class="row margin-reset">
										<strong th:text="${historia.titulo}"></strong>
									</div>
									<div class="row margin-reset">
										<p th:text="${historia.texto}"></p>
									</div>
									
<!-- 									<table> -->
<!-- 										<thead> -->
<!-- 											<tr> -->
<!-- 												<th th:text="${historia.titulo}"></th> -->
<!-- 											</tr> -->
<!-- 										</thead> -->
<!-- 										<tbody> -->
<!-- 											<tr> -->
<!-- 												<td th:text="${historia.texto}"></td> -->
<!-- 											</tr> -->
<!-- 										</tbody> -->
<!-- 									</table> -->
									
									<hr style="margin: 5px 0px 5px 0px; border-top: 1px solid #d7d7d7;"/>
									
									<div class="row margin-reset">
										<div class="col-xs-10 col-sm-10 col-md-10">
											<div class="col-xs-5 col-sm-5 col-md-5" style="padding-left: 0px;">
												<strong>Usuario: </strong><span th:text="${historia.username}"></span>
											</div>
											<div class="col-xs-5 col-sm-5 col-md-5">
												<strong>Creaci&oacute;n: </strong><span th:text="${historia.fechaCreacion}"></span>
											</div>
										</div>
										<div class="col-xs-2 col-sm-2 col-md-2">
											<div th:style="'background-color: ' + ${historia.colorEstado} + ';float:right;width: 6vw;text-align: center;'">
												<span style="color: #FFFFFF;" th:text="${historia.nombreEstado}"></span>
											</div>
										</div>
									</div>
								</td>
								<td style="text-align: center;">
									<button th:if="${historia.estadoPublicacion==2}"
										th:id="'aproHist-' + ${historia.id}"
										style="background-color: #569837;"
										class="aproButtonHist btn">
										<span style="color: #FFFFFF;" class="glyphicon glyphicon-ok"></span>
									</button>
									<button th:if="${historia.estadoPublicacion==2}"
										th:id="'rechHist-' + ${historia.id}"
										style="background-color: #B22D2C;"
										class="rechaButtonHist btn">
										<span style="color: #FFFFFF;" class="glyphicon glyphicon-remove"></span>
									</button>
								</td>
								<td >
								    <div th:if="${historia.cantidadComenTotal>0}" style="text-align:center">
								        <span th:text="${historia.cantidadComenPen} + ${historia.cantidadComenPen == 1 ? ' pendiente' : ' pendientes'}"></span>							    
								        <br/>
								        <a id="verComenHisto" class="btn btn-default"
									       style="font-size: 0.9vw; background-color: #569837; border: none; margin-left: 1em;"
									       th:onclick="'visualizarComentariosHistoria(' + ${historia.id} + ');'">
<!-- 									       	<span class="glyphicon glyphicon-eye-open"></span> -->
									        <span style="color: #FFFFFF;"> Ver Comentarios</span>
								        </a>
								    </div>								    
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<script th:inline="javascript"> 
                    $('.aproButtonHist').off().click(function() {
                        var idComplete = $(this).attr('id');  
                        var id = idComplete.substring(9);
                        $.ajax({
                            url: "/cambiarEstadoHistoria/" + id + "/aprobado",
                            method: "GET",
                        }).success(function(response) {
                        	$('#estadoHist_' + id).text("APROBADO"); 
                            $('#estadoHist_' + id).css('background-color',"#559839");
                        	$('#aproHist-' + id).hide(); 
                        	$('#rechHist-' + id).hide();   
                        	alert(response);
                        });                               
                    });  
                    
                    $('.rechaButtonHist').off().click(function() {
                    	var idComplete = $(this).attr('id');  
                        var id = idComplete.substring(9);
                        $.ajax({
                            url: "/cambiarEstadoHistoria/" + id + "/rechazado",
                            method: "GET",
                        }).success(function(response) {
                        	$('#estadoHist_' + id).text("RECHAZADO"); 
                            $('#estadoHist_' + id).css('background-color',"#B22D2C");
                        	$('#aproHist-' + id).hide(); 
                        	$('#rechHist-' + id).hide();
                        	alert(response);	
                        });                               
                    });   
                    
                    function closeModalHistorias() {
                        document.getElementById('modalHistorias').style.display = "none";
                    }  
                                        
                </script>
		</div>
	</div>




	<div id="modalComenHisto" th:fragment="modalComenHisto">
		<div id="modalComenHisto" class="modal"
			th:style="'display: ' + ${despliegeModalComenHisto}">
			<div class="contenido">

				<button onclick="closeModalComenHisto()" class="btn btn-default"
					style="background-color: #FB0101; float: right;">
					<span class="glyphicon glyphicon-remove"
						style="float: right; color: #FFFFFF;"></span>
				</button>

				<h1 style="background-color: #9FC418; color: #FFFFFF; width: 600px;">Listado
					de Comentarios</h1>

				<div
					style="border: 25px solid; border-color: transparent; background-color: rgba(0, 0, 0, 0.8);">

					<table id="tableComenHisto"
						class="table table-striped table-bordered" cellspacing="0"
						style="width: 100%; background-color: #E5E5E5; font-size: 0.9vw;">
						<thead>
							<tr>
								<th>ID</th>
								<th>Comentario</th>
								<th>Aceptar/Rechazar</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="comenHisto : ${comenHistoList}">
								<td th:text="${comenHisto.id}"></td>
								<td>
									<div  class="row margin-reset">
										<span th:text="${comenHisto.descripcion}"></span>
									</div>
									
									<hr style="margin: 5px 0px 5px 0px; border-top: 1px solid #d7d7d7;"/>
									
									<div class="row margin-reset">
										<div class="col-xs-10 col-sm-10 col-md-10">
											<div class="col-xs-5 col-sm-5 col-md-5" style="padding-left: 0px;">
												<strong>Usuario: </strong><span th:text="${comenHisto.username}"></span>
											</div>
											<div class="col-xs-5 col-sm-5 col-md-5">
												<strong>Creaci&oacute;n: </strong><span th:text="${comenHisto.fechaCreacion}"></span>
											</div>
										</div>
										<div class="col-xs-2 col-sm-2 col-md-2">
											<div 	th:id="'estadocomenHisto_' + ${comenHisto.id}"
													th:style="'background-color: ' + ${comenHisto.colorEstado} + ';float:right;width: 6vw;text-align: center;'">
												<span style="color: #FFFFFF;" th:text="${comenHisto.nombreEstado}"></span>
											</div>
										</div>
									</div>
								</td>
								<td  style="text-align: center;">
									<button th:if="${comenHisto.estadoPublicacion==2}"
										th:id="'aproComenHisto-' + ${comenHisto.id}"
										style="background-color: #569837;"
										class="aproButtonComenHisto btn">
										<span style="color: #FFFFFF;"  class="glyphicon glyphicon-ok"></span>
									</button>
									<button th:if="${comenHisto.estadoPublicacion==2}"
										th:id="'rechComenHisto-' + ${comenHisto.id}"
										style="background-color: #B22D2C;"
										class="rechaButtonComenHisto btn">
										<span style="color: #FFFFFF;"  class="glyphicon glyphicon-remove"></span>
									</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<script th:inline="javascript"> 
                    $('.aproButtonComenHisto').off().click(function() {
                        var idComplete = $(this).attr('id');  
                        var id = idComplete.substring(15);
                        $.ajax({
                            url: "/cambiarEstadoComenHistoria/" + id + "/aprobado",
                            method: "GET",
                        }).success(function(response) {
                        	$('#estadocomenHisto_' + id).text("APROBADO"); 
                            $('#estadocomenHisto_' + id).css('background-color',"#559839");
                        	$('#aproComenHisto-' + id).hide(); 
                        	$('#rechComenHisto-' + id).hide();   
                        	alert(response);
                        });                               
                    });  
                    
                    $('.rechaButtonComenHisto').off().click(function() {
                    	var idComplete = $(this).attr('id');  
                        var id = idComplete.substring(15);
                        $.ajax({
                            url: "/cambiarEstadoComenHistoria/" + id + "/rechazado",
                            method: "GET",
                        }).success(function(response) {
                        	$('#estadocomenHisto_' + id).text("RECHAZADO"); 
                            $('#estadocomenHisto_' + id).css('background-color',"#B22D2C");
                        	$('#aproComenHisto-' + id).hide(); 
                        	$('#rechComenHisto-' + id).hide();
                        	alert(response);	
                        });                               
                    }); 
                    
                    function closeModalComenHisto() {
                        document.getElementById('modalComenHisto').style.display = "none";
                    }  
                </script>
		</div>
	</div>




	<div id="modalComenAvist" th:fragment="modalComenAvist">
		<div id="modalComenAvist" class="modal"
			th:style="'display: ' + ${despliegeModalComenAvist}">
			<div class="contenido">

				<button onclick="closeModalComenAvist()" class="btn btn-default"
					style="background-color: #FB0101; float: right;">
					<span class="glyphicon glyphicon-remove"
						style="float: right; color: #FFFFFF;"></span>
				</button>

				<h1 style="background-color: #9FC418; color: #FFFFFF; width: 600px;">Listado
					de Comentarios</h1>

				<div
					style="border: 25px solid; border-color: transparent; background-color: rgba(0, 0, 0, 0.8);">

					<table id="tableComenAvist"
						class="table table-striped table-bordered" cellspacing="0"
						style="width: 100%; background-color: #E5E5E5; font-size: 0.9vw;">
						<thead>
							<tr>
								<th>ID</th>
								<th>Comentarios</th>
								<th>Aceptar/Rechazar</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="comenAvist : ${comenAvistList}">
								<td th:text="${comenAvist.id}"></td>
								<td>
									<div class="row margin-reset">
										<span th:text="${comenAvist.descripcion}"></span>
									</div>
									
									<hr style="margin: 5px 0px 5px 0px; border-top: 1px solid #d7d7d7;"/>
									
									<div class="row margin-reset">
										<div class="col-xs-10 col-sm-10 col-md-10">
											<div class="col-xs-5 col-sm-5 col-md-5" style="padding-left: 0px;">
												<strong>Usuario: </strong><span th:text="${comenAvist.username}"></span>
											</div>
											<div class="col-xs-5 col-sm-5 col-md-5">
												<strong>Creaci&oacute;n: </strong><span th:text="${comenAvist.fechaCreacion}"></span>
											</div>
										</div>
										<div class="col-xs-2 col-sm-2 col-md-2">
											<div 	th:id="'estadocomenHisto_' + ${comenAvist.id}"
													th:style="'background-color: ' + ${comenAvist.colorEstado} + ';float:right;width: 6vw;text-align: center;'">
												<span style="color: #FFFFFF;" th:text="${comenAvist.nombreEstado}"></span>
											</div>
										</div>
									</div>
									
								</td>
								<td style="text-align: center;">
									<button th:if="${comenAvist.estadoPublicacion==2}"
										th:id="'aproComenAvist-' + ${comenAvist.id}"
										style="background-color: #569837; border: none;"
										class="aproButtonComenAvist btn">
										<span style="color: #FFFFFF;" class="glyphicon glyphicon-ok"></span>
									</button>
									<button th:if="${comenAvist.estadoPublicacion==2}"
										th:id="'rechComenAvist-' + ${comenAvist.id}"
										style="background-color: #B22D2C; border: none;"
										class="rechaButtonComenAvist btn">
										<span style="color: #FFFFFF;"  class="glyphicon glyphicon-remove"></span>
									</button>
								</td>
								
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<script th:inline="javascript"> 
                    $('.aproButtonComenAvist').off().click(function() {
                        var idComplete = $(this).attr('id');  
                        var id = idComplete.substring(15);
                        $.ajax({
                            url: "/cambiarEstadoComenAvistamiento/" + id + "/aprobado",
                            method: "GET",
                        }).success(function(response) {
                        	$('#estadocomenAvist_' + id).text("APROBADO"); 
                            $('#estadocomenAvist_' + id).css('background-color',"#559839");
                        	$('#aproComenAvist-' + id).hide(); 
                        	$('#rechComenAvist-' + id).hide();   
                        	alert(response);
                        });                               
                    });  
                    
                    $('.rechaButtonComenAvist').off().click(function() {
                    	var idComplete = $(this).attr('id');  
                        var id = idComplete.substring(15);           
                        $.ajax({
                            url: "/cambiarEstadoComenAvistamiento/" + id + "/rechazado",
                            method: "GET",
                        }).success(function(response) {
                        	$('#estadocomenAvist_' + id).text("RECHAZADO"); 
                            $('#estadocomenAvist_' + id).css('background-color',"#B22D2C");
                        	$('#aproComenAvist-' + id).hide(); 
                        	$('#rechComenAvist-' + id).hide();
                        	alert(response);	
                        });                               
                    }); 
                    
                    function closeModalComenAvist() {
                        document.getElementById('modalComenAvist').style.display = "none";
                    }  
                </script>
		</div>
	</div>




	<div id="modalEditAvist" th:fragment="modalEditAvist">
		<div id="modalEditAvist" class="modal"
			th:style="'display: ' + ${despliegeModalEditAvist}">
			<div style="position: relative; margin: auto; top: 10%; width: 30%;">
				<button onclick="closeModalEditAvist()" class="btn btn-default"
					style="background-color: #FB0101; float: right;">
					<span class="glyphicon glyphicon-remove"
						style="float: right; color: #FFFFFF;"></span>
				</button>

				<h1 style="background-color: #9FC418; color: #FFFFFF; width: 450px;">Editar
					Avistamiento</h1>

				<div
					style="border: 25px solid; border-color: transparent; background-color: rgba(0, 0, 0, 0.8);">
					<div style="width: 100%; background-color: #E5E5E5;">
						<div class="row margin-reset">
							<br />
							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								C&oacute;digo: <span id="idAvistEdit" th:text="${idAvistEdit}"
									style="color: #777575;"></span>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Nombre Com&uacute;n: <input id="nombreEdit" type="text"
									th:value="${nombreEdit}"
									style="color: #777575; border-radius: 0px; width: 95%;"></input>
							<p id="validNombreEdit" style="color: #FF0000; margin-left: 1em;"></p>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Descripci&oacute;n: <input id="descripEdit" type="text"
									th:value="${descripEdit}"
									style="color: #777575; border-radius: 0px; width: 95%;"></input>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Nombre Cient&iacute;fico: <input id="nomCienEdit" type="text"
									th:value="${nomCienEdit}"
									style="color: #777575; border-radius: 0px; width: 95%;"></input>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Tipo Avistamiento: <span th:text="${tipoAvistEdit}"
									style="color: #777575;"></span>
							</p>

							<br /> <br /> <a id="guardaAvist"
								class="btn btn-default guardaAvist"
								style="height: 32px; background-color: #569837; border: none; margin-left: 1em;"
								th:onclick="'guardarAvistamiento(' + ${idAvistEdit} + ',\'' + ${numColorApp} + '\');'">
								<span style="color: #FFFFFF;">Guardar</span>
							</a> <a id="cancelAvist" class="btn btn-default cancelAvist"
								style="height: 32px; background-color: #FF0000; border: none; margin-left: 1em;"
								onclick="closeModalEditAvist()"> <span
								style="color: #FFFFFF;">Cancelar</span>
							</a> <br /> <br />
						</div>
					</div>
				</div>
			</div>
			<script th:inline="javascript"> 
                    function guardarAvistamiento(id,numColorApp) { 
                        var nombre = $('#nombreEdit').val();                        											
						if(nombre!=""){
						    var descrip = $('#descripEdit').val();
                            var nomCien = $('#nomCienEdit').val();
                            
                            var tipoEsp = "0"; 
                            if(nomCien==""){  nomCien = "0"  }
                            
                            $.ajax({
                                url: "/editarAvistamiento/"
                                	 + id + "/" + nombre + "/" + descrip + "/" + nomCien + "/" + tipoEsp + "/" + numColorApp + "",
                                method: "GET",
                                beforeSend: function() {
                                	$('avistamientoDetalle').remove();
                                },
                                success: function(html) { 
                                	$('#avistamientoDetalle').replaceWith(html);
                                	$('#modalFourViews').find('#avistamientoDetalle').replaceWith(html);
                                } 
                            });
                            document.getElementById('modalEditAvist').style.display = "none";
						}else{
						    document.getElementById('validNombreEdit').innerHTML = "Debe colocar un nombre";
						}												
                    }; 
					
                    function closeModalEditAvist() {
                        document.getElementById('modalEditAvist').style.display = "none";
                    };  
                </script>
		</div>
	</div>




	<div id="modalAproAvist" th:fragment="modalAproAvist">
		<div id="modalAproAvist" class="modal"
			th:style="'display: ' + ${despliegeModalAproAvist}">
			<div style="position: relative; margin: auto; top: 10%; width: 30%;">
				<button onclick="closeModalAproAvist()" class="btn btn-default"
					style="background-color: #FB0101; float: right;">
					<span class="glyphicon glyphicon-remove"
						style="float: right; color: #FFFFFF;"></span>
				</button>

				<h1 style="background-color: #9FC418; color: #FFFFFF; width: 450px;">Aprobar
					Avistamiento</h1>

				<div
					style="border: 25px solid; border-color: transparent; background-color: rgba(0, 0, 0, 0.8);">
					<div style="width: 100%; background-color: #E5E5E5;">
						<div class="row margin-reset">
							<br />
							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								C&oacute;digo: <span id="idAvistApr" th:text="${idAvistApr}"
									style="color: #777575;"></span>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Nombre Com&uacute;n: <input id="nombreApr" type="text"
									th:value="${nombreApr}"
									style="color: #777575; border-radius: 0px; width: 95%;"></input>
							<p id="validNombreApr" style="color: #FF0000; margin-left: 1em;"></p>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Descripci&oacute;n: <input id="descripApr" type="text"
									th:value="${descripApr}"
									style="color: #777575; border-radius: 0px; width: 95%;"></input>
							</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Nombre Cient&iacute;fico: <input id="nomCienApr" type="text"
									th:value="${nomCienApr}"
									style="color: #777575; border-radius: 0px; width: 95%;"></input>
							</p>
							<br />
							<p
								th:style="'color:#FF0000; margin-left:1em; display: ' + ${showSelectApr} + ';'">
								Debe asignarle una especie a su avistamiento</p>

							<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
								Tipo Avistamiento: <span th:text="${tipoAvistApr}"
									style="color: #777575;"></span>
							</p>

							<div th:style="'display: ' + ${showSelectApr} + ';'">
								<p style="color: #569837; margin-left: 1em;">
									Tipo Especie: <select id="tipoEspApr">
										<option th:each="esp : ${listEspecieApr}" th:value="${esp.id}"
											th:text="${esp.nombre}"></option>
									</select>
								</p>
							</div>
							<br /> <br /> <a id="confAproAvist"
								class="btn btn-default confAproAvist"
								style="height: 32px; background-color: #569837; border: none; margin-left: 1em;"
								th:onclick="'confirmarAprovacionAvist(' + ${idAvistApr} + ',\''  + ${numColorApp} + '\');'">
								<span style="color: #FFFFFF;">Confirmar</span>
							</a> <a id="confRechAvist" class="btn btn-default confRechAvist"
								style="height: 32px; background-color: #FF0000; border: none; margin-left: 1em;"
								onclick="closeModalAproAvist()"> <span
								style="color: #FFFFFF;">Cancelar</span>
							</a> <br /> <br />
						</div>
					</div>
				</div>
			</div>
			<script th:inline="javascript"> 
                    function confirmarAprovacionAvist(id,numColorApp) { 
                        var nombre = $('#nombreApr').val();                       						
						if(nombre!=""){
						    var descrip = $('#descripApr').val();
                            var nomCien = $('#nomCienApr').val();
                            var tipoEsp = $('#tipoEspApr').val();
                            
                            if(nomCien==""){  nomCien = "0"  }
                                                       
                            $.ajax({
                                url: "/confirmarAprobacionAvistamiento/" + id + "/" + nombre + "/" + descrip + "/" 
                                                                         + nomCien + "/" + tipoEsp + "/" + numColorApp + "",
                                method: "GET",
                                beforeSend: function() {
                                	$('avistamientoDetalle').remove();
                                },
                                success: function(html) { 
                                	$('#avistamientoDetalle').replaceWith(html);
                                    $('#modalFourViews').find('#avistamientoDetalle').replaceWith(html);
                                    $('#estadoAvist_' + id).text("Aprobado"); 
                                    $('#estadoAvist_' + id).css('color',"#559839");                	
                                    $('#modalFourViews').find('#estadoAvist_'+id).text("Aprobado");
                                    $('#modalFourViews').find('#estadoAvist_'+id).css('color',"#559839"); 
                                    
                                    $.ajax({
                                        url: "/getMarcadorAvistamiento/" + id,
                                        method: "GET",
                                    }).success(function(paquete) {
                                        /*<![CDATA[*/                            
                                            initMap(paquete);
            		                    /*]]>*/	                                	
                                    }); 
                                }  
                            });
                            document.getElementById('modalAproAvist').style.display = "none";
						}else{
						    document.getElementById('validNombreApr').innerHTML = "Debe colocar un nombre";
						}												
                    }; 
                    
                    function closeModalAproAvist() {
                        document.getElementById('modalAproAvist').style.display = "none";
                    };  
                </script>
		</div>
	</div>




	<div th:fragment="quarter-section1-mini">
		<div class="ribbon-quarter-tittle" align="center"
			th:style="' position: relative; background-color: ' + ${colorApp} + ';'">
			<a href="#"> <span style="color: #FFFFFF; font-size: 1.7vh; font-size: 1.7vw">Notificaciones</span>
			</a>
		</div>
		<br /> <img src="assets/imagesAdminAvist/filtrosTabla.jpg"
			style="width: 100%;"></img> <br />
		<div class="row margin-reset">
			<ul class="nav nav-tabs">
				<li class="sub-menu" th:each="capaNavTab : ${capasNavTabs}"
					th:style="${capaNavTab.id == idCapaSel} ? 'background-color:'+${colorApp}+'' : 'background-color: #9FC418'">
					<a href="#" data-toggle="dropdown" class="menuNaveAvist3"
					th:id="${capaNavTab.id} + '-0'"> <span style="color: #FFFFFF;"
						th:text="${capaNavTab.nombre}"></span>
				</a>
				</li>
			</ul>
		</div>
		<img
			src="assets/imagesAdminAvist/adminAvistamiento_vistaListadoAvist.jpg"
			style="width: 100%;"></img>
	</div>
	
	
	
    <div id="avistamientoDetalle-mini" th:fragment="quarter-section2-mini">
		<div class="ribbon-quarter-tittle" align="center" th:style="'position: relative; background-color: #' + ${numColorApp} + ';'">
			<a href="#"> <span
				style="color: #FFFFFF; font-size: 1.7vw">Visualizaci&oacute;n</span>
			</a>
		</div>
		<div style="margin: 5%;">
			<div class="row margin-reset"
				style="padding: 0px; background-color: #E7E7E7;">
				<div class="col-xs-12 col-sm-5 col-md-5" align="center"
					th:style="'heigh:100% ;padding: 0px; -webkit-box-shadow: 7px 0px 28px -8px rgba(0,0,0,0.75); -moz-box-shadow: 7px 0px 28px -8px rgba(0,0,0,0.75); box-shadow: 7px 0px 28px -8px rgba(0,0,0,0.75);'">
					<div
						th:style="'width:100%;background-color: #' + ${numColorApp} + ';'">
						<img th:src="${rutaIconoMarcador}" th:style="'width:20%;'"></img>
					</div>
					<div style="margin: 5%; height: 100%">
						<img
							th:src="${(rutaImagen != null) ? rutaImagen : 'assets/images/E7E7E7.png'}"
							style="width: 100%;" class="img-fluid rounded d-block m-l-none" />
					</div>
				</div>

				<div class="col-xs-12 col-sm-7 col-md-7"
					style="padding: 0px; font-size: 0.8vh; font-size: 0.8vw">

					<div class="row margin-reset">

						<h3 align="center" th:style="'color: #' + ${numColorApp} + ';'">
							<span type="text" style="font-weight: 800; font-size: 0.9vh; font-size: 0.9vw"
								th:text="${(nombre != null ? nombre : 'Nombre')}"></span> <span
								type="text" th:text="' | '"></span> <span type="text" style="font-size: 1.2vh; font-size: 1.2vw"
								th:text="${(nombreCientifico != null) ? nombreCientifico : 'Nombre Cientifico'}"></span>
						</h3>

						<h4 align="center" th:style="'color: #' + ${numColorApp} + ';'">
							<span th:text="'Cod. ' "></span> <span th:text="${id}"></span>
						</h4>
						<br />

						<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
							<span type="text" th:text="${descripcion}"
								style="color: #777575; border-radius: 0px;"></span>
						</p>

						<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
							<span class="glyphicon glyphicon-calendar"></span> Fecha: <span
								type="text" th:text="${fechaCreacion}"
								style="color: #777575; border-radius: 0px;"></span>
						</p>

						<p th:style="'color: #' + ${numColorApp} + '; margin-left:1em;'">
							<span class="glyphicon glyphicon-user"></span> Usuario: <span
								type="text" th:text="${username}"
								style="color: #777575; border-radius: 0px;"></span>
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>




	<div th:fragment="quarter-section3-mini">
		<div class="ribbon-quarter-tittle" align="center"
			th:style="'position: relative; background-color: #' + ${numColorApp} + ';'">
			<a href="#"> <span style="color: #FFFFFF;  font-size: 1.7vh; font-size: 1.7vw">Monitoreo</span>
			</a>
		</div>
		<br /> <img src="assets/imagesAdminAvist/filtrosEst.jpg"
			style="width: 100%;"></img> <br />
		<p id="validacionFechasEst" style="text-align: center; color: #FB0101"></p>
		<ul class="nav nav-tabs">
			<li class="sub-menu"
				th:style="'background-color: #' + ${numColorApp} + ';'"><a
				href="#" data-toggle="dropdown" id="usuario"
				class="menuNaveAvistEst3"> <span style="color: #FFFFFF;">Usuario</span>
			</a></li>
			<li class="sub-menu" th:style="'background-color: #9FC418'"><a
				href="#" data-toggle="dropdown" id="municipio"
				class="menuNaveAvistEst3"> <span style="color: #FFFFFF;">Municipio</span>
			</a></li>
		</ul>
		<div id="chart_div_user3">
			<img
				src="assets/imagesAdminAvist/adminAvistamiento_esatdisticaUsuario.jpg"
				style="width: 100%;"></img>
		</div>
		<div id="chart_div_muni3">
			<img
				src="assets/imagesAdminAvist/adminAvistamiento_esatdisticaMunicipio.jpg"
				style="width: 100%;"></img>
		</div>
		<h1
			th:style="'text-align:center; color: #' + ${numColorApp} + '; margin-left:1em;font-size: 3vw; font-size: 3vh;'">
			Total avistamientos: <span id="totalAvistEst3"
				th:text="${totalAvist}" style="color: #777575;">0</span>
		</h1>
	</div>



</body>

</html>